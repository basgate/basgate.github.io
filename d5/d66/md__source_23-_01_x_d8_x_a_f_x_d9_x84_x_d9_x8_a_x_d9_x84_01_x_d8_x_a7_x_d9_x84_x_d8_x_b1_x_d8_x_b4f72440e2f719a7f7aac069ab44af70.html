<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ar-EG">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BaseGate Docs: 3.1 دليل الربط مع المنصة -SDK</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../icon.png"/></td>
  <td id="projectalign">
   <div id="projectname">BaseGate Docs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- انتجت بواسطة Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','بحث');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">3.1 دليل الربط مع المنصة -SDK</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md31-دليل-الربط-مع-المنصة--sdk"></a> <a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#document-revision-history">Bas Mini-Apps [5](#document-revision-history)</a></p>
<p><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#what-are-bas-mini-apps">What are Bas Mini Apps? [5](#what-are-bas-mini-apps)</a></p>
<p><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#how-bas-mini-apps-works">How Bas Mini Apps works? [5](#how-bas-mini-apps-works)</a></p>
<p><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#why-develop-a-bas-mini-app">Why develop a Bas Mini Apps? [5](#why-develop-a-bas-mini-app)</a></p>
<p><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#step-by-step-integration-guide">Step by Step Integration Guide [5](#step-by-step-integration-guide)</a></p>
<p>Easy 3-step process to create your Mini App [5](#easy-3-step-process-to-create-your-mini-app)</p>
<p><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#step-1-register">Step 1: Register [6](#step-1-register)</a></p>
<p><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#step-2-develop">Step 2: Develop [6](#step-2-develop)</a></p>
<p><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#step-3-publish">Step 3: Publish [7](#step-3-publish)</a></p>
<p><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#app-review">• App Review [7](#app-review)</a></p>
<p><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#go-live">• Go-Live [7](#go-live)</a></p>
<p><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#integration-guidelines">Integration Guidelines [8](#integration-guidelines)</a></p>
<p><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#login-flow">Login Flow [9](#login-flow)</a></p>
<p><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#basfetchauthcode-js-api">basFetchAuthCode JS API [12](#basfetchauthcode-js-api)</a></p>
<p><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#use-case">Use Case [12](#use-case)</a></p>
<p><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#request-attributes">Request Attributes [13](#request-attributes)</a></p>
<p><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#response-attributes">Response Attributes [14](#response-attributes)</a></p>
<p><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#post-api">POST: getAccessToken API [15](#post-api)</a></p>
<p><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#use-case-1">Use Case [15](#use-case-1)</a></p>
<p><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#request-attributes-1">Request Attributes [15](#request-attributes-1)</a></p>
<p><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#response-attributes-1">Response Attributes [16](#response-attributes-1)</a></p>
<p><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#post-getuserinfo-api">POST: getUserInfo API [18](#post-getuserinfo-api)</a></p>
<p><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#use-case-2">Use Case [18](#use-case-2)</a></p>
<p><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#request-attributes-2">Request Attributes [18](#request-attributes-2)</a></p>
<p><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#response-attributes-2">Response Attributes [19](#response-attributes-2)</a></p>
<p><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#payment-flow">Payment Flow [21](#payment-flow)</a></p>
<p><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#post-initiate-transaction-order-api">POST: BasPayment JS API [22](#post-initiate-transaction-order-api)</a></p>
<p><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#use-case-4">Use Case [22](#use-case-4)</a></p>
<p><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#request-attributes-4">Request Attributes [22](#request-attributes-4)</a></p>
<p><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#response-attributes-4">Response Attributes [23](#response-attributes-4)</a></p>
<h1><a class="anchor" id="document-revision-history"></a>
Document Revision History</h1>
<p><b>APPROVAL HISTORY</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Date   </th><th class="markdownTableHeadNone">Version   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Revision by    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2/10/2022   </td><td class="markdownTableBodyNone">0.01   </td><td class="markdownTableBodyNone">1<sup>st</sup> draft version   </td><td class="markdownTableBodyNone">Eissa, Abdullah, Qamhan,Amr &amp; Kamal    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">30/10/2022   </td><td class="markdownTableBodyNone">0.02   </td><td class="markdownTableBodyNone">2<sup>st</sup> draft version   </td><td class="markdownTableBodyNone">Eissa &amp; Qamhan    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">21/11/2022   </td><td class="markdownTableBodyNone">0.03   </td><td class="markdownTableBodyNone">3<sup>st</sup> draft version   </td><td class="markdownTableBodyNone">Eissa, Kamal &amp; Amr    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">5/12/2022   </td><td class="markdownTableBodyNone">0.04   </td><td class="markdownTableBodyNone">4<sup>st</sup> draft version   </td><td class="markdownTableBodyNone">Eissa &amp; Amr    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">28/12/2022   </td><td class="markdownTableBodyNone">0.05   </td><td class="markdownTableBodyNone">5<sup>st</sup> draft version   </td><td class="markdownTableBodyNone">Eissa &amp; Ahmed alshaikh    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">7/2/2023   </td><td class="markdownTableBodyNone">0.06   </td><td class="markdownTableBodyNone">6<sup>st</sup> draft version   </td><td class="markdownTableBodyNone">Eissa &amp; Qamhan   </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Approver   </th><th class="markdownTableHeadNone">Approved Date   </th><th class="markdownTableHeadNone">Version    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td></tr>
</table>
<h1><a class="anchor" id="gloasry-table"></a>
Gloasry Table</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">No   </th><th class="markdownTableHeadNone">Item   </th><th class="markdownTableHeadNone">Definition    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">UML   </td><td class="markdownTableBodyNone">Unified Modeling Language    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">SDK   </td><td class="markdownTableBodyNone">Software Development Kit.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">API   </td><td class="markdownTableBodyNone">Application Programming Interface.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td></tr>
</table>
<h1><a class="anchor" id="bas-mini-apps"></a>
Bas Mini-Apps</h1>
<h2><a class="anchor" id="what-are-bas-mini-apps"></a>
What are Bas Mini Apps?</h2>
<p>Bas Mini Apps are web applications that are designed to function like native apps, with features such as push notifications, access to device hardware and sensors, and offline support, effectively meaning your app despite being developed as a web app can still enjoy all the benefits of a native app when being listed as a Mini Apps inside Bas App.</p>
<p>Furthermore, Bas Mini Apps can be accessed through the Bas App, which provides a convenient and accessible way for users to discover and use new apps. This makes it easier for businesses and developers to reach a wider audience and grow their user base.</p>
<p> </p>
<h2><a class="anchor" id="how-bas-mini-apps-works"></a>
How Bas Mini Apps works?</h2>
<p> </p>
<ol type="1">
<li>User clicks on Mini Apps section on the Bas app and finds your app listed in relevant categories.</li>
<li>User taps on your app icon and we open your integrated m-web. The complete control of the UI is handed to you.</li>
<li>User logs in/ signs up onto your app using a single click login.</li>
<li>User can seamlessly pay in your Mini App using the integrated Bas payment flow.</li>
</ol>
<h2><a class="anchor" id="why-develop-a-bas-mini-app"></a>
Why develop A BAS MINI APP?</h2>
<p>Traditional mobile app development can be complex and expensive, with challenges that include maintaining separate codebases for each platform, the cost of user acquisition, and the need to release updates and wait for user adoption.</p>
<p>Launching as a Bas Mini App can help to alleviate many of these challenges. Because Mini Apps are developed using web technologies, they can be built once and run across multiple platforms, reducing the need for maintaining separate codebases. Additionally, because Mini Apps are hosted within the Bas App, there is no need for costly user acquisition, as users of the Bas App can easily discover and access new Mini Apps.</p>
<p>Furthermore, Mini Apps can be updated quickly and easily, with changes taking effect immediately without the need for app releases or waiting periods for user adoption. This means that businesses and developers can make changes and updates to their Mini Apps in real-time, providing a more seamless and engaging user experience for their audience. Overall, launching as a Bas Mini App can help to reduce development, testing, and maintenance costs, while providing access to millions of Bas users with minimal effort. </p>
<h1><a class="anchor" id="step-by-step-integration-guide"></a>
Step by Step Integration Guide</h1>
<h2><a class="anchor" id="easy-3-step process-to create-your-mini-app"></a>
Easy 3-step process to create your Mini App</h2>
<p>| Register | Develop | Publish | |-------&mdash;|------&mdash;|------&mdash;|</p>
<h2><a class="anchor" id="step-1-register"></a>
Step 1: Register</h2>
<p>The merchant should be provided by the following register information</p>
<ul>
<li>**App ID:** The App ID is used to uniquely identify your Mini App within the Bas ecosystem, and it is necessary for a variety of operations, such as registering for push notifications, accessing in-app purchases, and retrieving analytics data. By using a unique App ID, Bas can ensure that interactions between Mini Apps and the Bas platform are secure and isolated from other Mini Apps.</li>
</ul>
<p><b>Note :</b> It's important to keep your App ID private and secure, as it is essentially a password that grants access to your Mini App within the Bas ecosystem.</p>
<ul>
<li>**Merchant Key:** This is a key that use in checksum. You will need this id for any interactions with the Bas ecosystem.</li>
<li>**Auth client ID and client secret:** These are required for login flow integration for your Mini App.</li>
</ul>
<h2><a class="anchor" id="step-2-develop"></a>
Step 2: Develop</h2>
<p>To onboard as Mini Apps, there are only two mandatory integration merchants need to implement:</p>
<ul>
<li><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#login-flow">Login Integration</a></li>
<li><a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#payment-flow">Payment Integration</a></li>
</ul>
<p>**Note:** Your Mini app cannot have any other login or payment methods other than the one's specified above. Using Login or Payment flow is optional depending on your app's use case.</p>
<h2><a class="anchor" id="step-3-publish"></a>
Step 3: Publish</h2>
<p>Once you have completed the integration, submit your app to Bas team for review.</p>
<h3><a class="anchor" id="app-review"></a>
App Review</h3>
<ul>
<li>We will review the miniapp soon &amp; feedback.</li>
</ul>
<h3><a class="anchor" id="go-live"></a>
Go-Live</h3>
<ul>
<li>Congrats! Your go-live request is registered. Your app will be made post a final sanity test by the Bas team in the next 1-2 working days.</li>
</ul>
<h1><a class="anchor" id="integration-guidelines"></a>
Integration Guidelines</h1>
<p>In order to provide a seamless experience for end-users, Refacing Bas Mini Apps have some platform expectations from merchants, and it is expected that every 3rd party merchant adheres to these practices..</p>
<ol type="1">
<li>The end-user must be able to sign-in into Merchant Mini Apps only through Bas sign-in. There should be no other modes of login like manual user input based login method or social login.</li>
<li>Payment mode in Mini Apps should only be via. [basPayment](\l) JS API and no other payment modes should be visible during anytime in the app flow.</li>
<li>Merchants should not send promotional messages by leveraging Notification API.Violation of this would lead to blacklisting of Merchant Notifications.</li>
<li>There must be no link in the Mini Apps redirecting the user to download Android/iOS app. There should not be any other advertising content and no user redirection out of Mini Apps is allowed.</li>
<li>It is recommended that Merchants have a well-defined Customer Service flow in Mini Apps.</li>
</ol>
<h1><a class="anchor" id="login-flow"></a>
Login Flow</h1>
<p>Mini Apps platform requires merchant to mandatorily integrate the login flow for Mini Apps. Essentially merchant cannot have a manual sign-in process for the user i.e. whenever a Mini Apps requires user credentials, the only method allowed is via the Login Flow.</p>
<p> </p>
<p><b>Note</b>: Mini Apps platform requires merchant to mandatorily integrate the login flow. Essentially merchants can not have a manual sign-in process for the user i.e. whenever a Mini Apps requires user credentials, the only method allowed is via the Bas Login Flow.** **</p>
<p><img src="../../media/image1.jpeg" alt="" style="width:6.27014in;height:7.55383in" class="inline"/></p>
<p><b>The login flow for Mini Apps works like this:</b></p>
<ol type="1">
<li>User clicks on the merchant app icon on the Bas Mini App Store, Bas opens the merchant's Mini App</li>
<li>User browses the catalog/ adds items to their cart</li>
<li>When merchant app flow requires to login the user, user is shown a popup asking permission to share their credentials with the merchant</li>
<li>Once user taps on "Allow", they are seamlessly logged in to the merchant Mini App.</li>
</ol>
<p>**Note:** The consent will only come once and for returning users, the merchant can seamlessly access user details to facilitate login.</p>
<p><b>Integrating Login flow in Mini Apps involves the following steps:</b></p>
<p> </p>
<p><b>Step 1</b>: Call [basFetchAuthCode](\l) JS API at client end to get the Auth Code</p>
<p>**Step 2:** Call [getAccessToken API](\l) from backend (S2S) to get Auth Token using the Auth Code received in Step 1</p>
<p>**Step 3:** Call <a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#post-getuserinfo-api">getUserInfo API</a> from backend (S2S) to get user details of Bas users and seamlessly login the user</p>
<p> </p>
<p>**Note:** Please ensure the client secret shared during your app onboarding is never passed to your frontend/ m-web in the flow.</p>
<p> </p>
<p> </p>
<p><b>Merchant Side Login Flow Handling</b></p>
<p>Bas expects the merchant to handle all known scenario arising in a login flow. Following are the scenarios possible:</p>
<p> </p>
<h4><a class="anchor" id="consent-allowed-and-all-profile-details-configured"></a>
Consent Allowed and all Profile Details Configured</h4>
<ul>
<li>Merchant calls [basFetchAuthCode](\l) JS API and user click on “Allow” in the consent popup. Merchant gets Auth Code as response and then seamlessly login the user, by fetching user details via S2S call.</li>
</ul>
<h4><a class="anchor" id="consent-allowed-and-profile-details-incomplete"></a>
Consent Allowed and Profile Details Incomplete</h4>
<p> </p>
<h4><a class="anchor" id="consent-denied--user-press-back-on-consent-popup"></a>
Consent Denied / User Press back on consent popup</h4>
<ul>
<li><p class="startli">Merchant calls [basFetchAuthCode](\l) JS API and user click on “Deny” in the consent popup. Mini Apps Platform mandates merchants to not allow any form of manual/ social login. To handle consent denied cases, merchant can handle this in the following proposed way: <br  />
</p>
<p class="startli">On click of Deny/Back Button [basFetchAuthCode](\l) JS API will return **error code "-1"** based on that merchants can show a user friendly popup/toast stating something like “Consent is mandatory to proceed” and show CTA of OK/Cancel or Proceed/Exit. On tap of OK/Proceed call the [basFetchAuthCode](\l) JS API again and in case of Cancel/Exit call [popWindow](\l) JS API to take the user back to Bas App.</p>
</li>
</ul>
<p> </p>
<p>**Note:** If the user keeps on denying, it is advised to take user out of the Mini Apps after multiple denies.</p>
<p> </p>
<h4><a class="anchor" id="user-opens-mini-apps-while-logged-out-from-bas"></a>
User opens Mini Apps while logged out from Bas</h4>
<ul>
<li>There can be cases where a user is logged out from Bas App and tries to open any Mini Apps. In such cases when a merchant calls [basFetchAuthCode](\l)JS API, Bas will show the user a login Popup. There can be following cases arising:</li>
</ul>
<ol type="1">
<li>User logs in using the Login Popup: Bas will then proceed with normal login flow: Show consent and proceed. Merchant does not need to do any exceptional handling for such a scenario.</li>
<li>User press Skip Login / Press Hardware back: In this case [basFetchAuthCode](\l)JS API will return **error code "-"** based on that merchants should show a user friendly text stating something like “Login in Bas to Proceed with the Flow” with possible CTAs of OK/Cancel. On tap of OK call [basFetchAuthCode](\l) JS API again and on tap of Cancel, call [popWindow](\l) JS API to take the user back to Bas App.</li>
</ol>
<h2><a class="anchor" id="basfetchauthcode-js-api"></a>
basFetchAuthCode JS API</h2>
<h3><a class="anchor" id="use-case"></a>
Use Case</h3>
<p>This API can be used to get AuthCode and OpenID for the user accessing the Mini Apps. When merchants front-end calls this method, Bas will show the user a popup asking for permission to share these details. If the user allows on the consent popup same will be shared with the merchants. If the user denies, ideal expectation is for Merchants to call the API again.</p>
<p><b>Note</b>: No Manual Login from the user is allowed in the Mini Apps platform.</p>
<p> </p>
<p>**AuthCode: **This is a one-time use AuthCode passed by Bas to the merchant’s Mini Apps frontend/client codebase via JS API. This has a validity of 5 mins and is for single use only. This code is required to fetch the Bas AuthToken via S2S call with Bas’s Oauth backend.</p>
<p> </p>
<p>**OpenId:** This is a **unique user identifier** passed by Bas to Mini Apps. It remains the same throughout the lifetime of the user.</p>
<p> </p>
<h3><a class="anchor" id="request-attributes"></a>
Request Attributes</h3>
<table class="doxtable">
</table>
<p>&lt;col style="width: 100%" &gt; &lt;/colgroup&gt;  </p>
<p><b>JAVASCRIPT</b>    </p>
<p>window.addEventListener("JSBridgeReady", (event) =&gt; {</p>
<p>console.log("JSBridgeReady fired");</p>
<p>//to do anything you want after SDK is ready</p>
<p>basFetchAuthCode();</p>
<p>}, false);</p>
<p>function basFetchAuthCode(){</p>
<p>JSBridge.call('basFetchAuthCode', {</p>
<p>clientId: ""</p>
<p>}).then(function(result) {<br  />
 /****** Response Example ******/</p>
<p>  /*   {</p>
<p>        "status": 1,</p>
<p>        "data": {</p>
<p>          "authId": "",</p>
<p>          "openId": ""</p>
<p>         },</p>
<p>         "messages": [""]</p>
<p>        }*/</p>
<p>/****** End Response Example ******/<br  />
 console.log(JSON.stringify(result));<br  />
 });</p>
<p><b>Flutter</b>  </p>
<p>BasSDK.fetchAuthCode(clientId:"Your Id");   </p>
<p>API Content format: JSON</p>
<table class="doxtable">
</table>
<p>&lt;col style="width: 31%" &gt; &lt;col style="width: 68%" &gt; &lt;/colgroup&gt;  </p>
<p><b>PARAMETER</b> </p>
<p><b>DESCRIPTION</b>    </p>
<p>clientId</p>
<p>mandatory</p>
<p>Merchant's client Id received from Bas</p>
<p><b>Example</b>: merchant-xyz</p>
<h3><a class="anchor" id="response-attributes"></a>
Response Attributes</h3>
<h4><a class="anchor" id="success"></a>
Success</h4>
<p><b>Note</b>: Response will come as JSON with key data.</p>
<table class="doxtable">
</table>
<p>&lt;col style="width: 100%" &gt; &lt;/colgroup&gt;  </p>
<p>SUCCESS    </p>
<p>{<br  />
 "status":1,<br  />
 "data":{<br  />
 "auth_id":"FD268ED889B7DFB008093D04809E8B7FC26B821421B278",<br  />
 "authid":"FD268ED889B7DFB008093D04809E8B7FC26B821421B278",<br  />
 "openid":"null",<br  />
 "return_url":"null"},<br  />
 "messages":["&lt;span dir="rtl"&gt;تمت العملية بنجاح&lt;/span&gt;"]<br  />
 }   </p>
<table class="doxtable">
</table>
<p>&lt;col style="width: 35%" &gt; &lt;col style="width: 64%" &gt; &lt;/colgroup&gt;  </p>
<p><b>PARAMETER</b> </p>
<p><b>DESCRIPTION</b>    </p>
<p>authId </p>
<p>authId generated by Bas</p>
<p><b>Example</b>: abhd-jhsd-ujyt-afrw</p>
<h4><a class="anchor" id="error-responses"></a>
Error Responses</h4>
<p><b>Note</b>: Response will come as JSON with key data.</p>
<table class="doxtable">
</table>
<p>&lt;col style="width: 100%" &gt; &lt;/colgroup&gt;  </p>
<p>FAIL    </p>
<p>{</p>
<p>    "status": 0,</p>
<p>    "code": “2001”,</p>
<p>    "messages": [</p>
<p>        "duplicate order id"</p>
<p>    ]</p>
<p>}</p>
<table class="doxtable">
</table>
<p>&lt;col style="width: 39%" &gt; &lt;col style="width: 60%" &gt; &lt;/colgroup&gt;  </p>
<p><b>PARAMETER</b> </p>
<p><b>DESCRIPTION</b>    </p>
<p>error </p>
<p>error code in integers</p>
<p><b>Example</b>: -10 </p>
<p>errors </p>
<p>error message</p>
<p><b>Example</b>: Invalid clientID</p>
<p><a class="anchor" id="error-codes"></a> </p><h5>Error Codes</h5>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"><b>ERROR</b>   </th><th class="markdownTableHeadNone"><b>MESSAGE</b>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td></tr>
</table>
<h2><a class="anchor" id="post-api"></a>
POST: API</h2>
<h3><a class="anchor" id="use-case-1"></a>
Use Case</h3>
<p>Merchant can use this API to get the access token corresponding to an Auth Code (received from the App side in the earlier step). For the same merchant, the backend needs to make an S2S call with Bas backend. This token can be used to fetch the user details.</p>
<p>BaseURL/api/v1/auth/token</p>
<ol type="1">
<li>API Name and Type: POST /api/v1/auth/token/</li>
<li>Request URL<ul>
<li>Staging Environment<ol type="a">
<li>BaseURL/api/v1/auth/token</li>
</ol>
</li>
<li>Production Environment<ol type="a">
<li>Not provided yet.</li>
</ol>
</li>
</ul>
</li>
<li>Request Attributes as below:</li>
</ol>
<h3><a class="anchor" id="request-attributes-1"></a>
Request Attributes</h3>
<table class="doxtable">
</table>
<p>&lt;col style="width: 100%" &gt; &lt;/colgroup&gt;  </p>
<p><b>CURL</b>    </p>
<p>curl &ndash;location &ndash;request POST ' BaseURL/api/v1/auth/token' &lt;/p&gt; </p>
<p>&ndash;header 'Content-Type: application/x-www-form-urlencoded' &lt;/p&gt; </p>
<p>&ndash;data-urlencode 'client_id=AppName.APP' &lt;/p&gt; </p>
<p>&ndash;data-urlencode 'client_secret=90db2315-f829-4abe-9ca3-693a6cdc4acd' &lt;/p&gt; </p>
<p>&ndash;data-urlencode 'grant_type=authorization_code' &lt;/p&gt; </p>
<p>&ndash;data-urlencode 'code=340A109BA00BDF496CFA2A5885267C17733822CA0728984E9D5E01394584AC2D' &lt;/p&gt; </p>
<p>&ndash;data-urlencode 'redirect_uri= BaseURL/api/v1/auth/callback'</p>
<p>&lt;mark&gt;&lt;/mark&gt;  </p>
<p>Content Type : JSON</p>
<h4><a class="anchor" id="head"></a>
Head</h4>
<table class="doxtable">
</table>
<p>&lt;col style="width: 98%" &gt; &lt;col style="width: 1%" &gt; &lt;/colgroup&gt;  </p>
<table class="doxtable">
</table>
<p>&lt;col style="width: 17%" &gt; &lt;col style="width: 42%" &gt; &lt;col style="width: 39%" &gt; &lt;/colgroup&gt;  </p>
<p><b>Key</b> </p>
<p><b>Value</b> </p>
<p><b>Description</b>    </p>
<p>Authorization </p>
<p>Inherit auth from parent </p>
<p>Content-Type </p>
<p>application/x-www-form-urlencoded </p>
<h4><a class="anchor" id="body"></a>
Body</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"><b>Parameter name</b>   </th><th class="markdownTableHeadNone"><b>Mandatory</b>   </th><th class="markdownTableHeadNone"><b>Static</b>   </th><th class="markdownTableHeadNone"><b>Type</b>   </th><th class="markdownTableHeadNone"><b>Description</b>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">client_id   </td><td class="markdownTableBodyNone"><img src="../../media/image2.png" alt="" style="width:0.38502in;height:0.30208in" class="inline"/>   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">String   </td><td class="markdownTableBodyNone">Client ID provided by Bas platform    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">client_secret   </td><td class="markdownTableBodyNone"><img src="../../media/image2.png" alt="" style="width:0.38502in;height:0.30208in" class="inline"/>   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">String   </td><td class="markdownTableBodyNone">Client secret provided by Bas platform    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">scope   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">Client scopes that granted by Bas platform    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">grant_type   </td><td class="markdownTableBodyNone"><img src="../../media/image2.png" alt="" style="width:0.38502in;height:0.30208in" class="inline"/>   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">String   </td><td class="markdownTableBodyNone">Type of grant (authorization_code)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">code   </td><td class="markdownTableBodyNone"><img src="../../media/image2.png" alt="" style="width:0.38502in;height:0.30208in" class="inline"/>   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">String   </td><td class="markdownTableBodyNone">Authorization code that return from SDK (auth id)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">redirect_uri   </td><td class="markdownTableBodyNone"><img src="../../media/image2.png" alt="" style="width:0.38502in;height:0.30208in" class="inline"/>   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">String   </td><td class="markdownTableBodyNone">Return to SDK   </td></tr>
</table>
<h3><a class="anchor" id="response-attributes-1"></a>
Response Attributes</h3>
<h4><a class="anchor" id="head-1"></a>
Head</h4>
<table class="doxtable">
</table>
<p>&lt;col style="width: 43%" &gt; &lt;col style="width: 56%" &gt; &lt;/colgroup&gt;  </p>
<p><b>ATTRIBUTE</b> </p>
<p><b>DESCRIPTION</b>    </p>
<p>status </p>
<p>status of response</p>
<p><b>Example</b>: 200</p>
<h4><a class="anchor" id="success-1"></a>
Success</h4>
<table class="doxtable">
</table>
<p>&lt;col style="width: 100%" &gt; &lt;/colgroup&gt;  </p>
<p><b>SUCCESS</b>    </p>
<p>{</p>
<p>    "access_token": "FD268ED889B7D33005B5DD81DB7D60FFB008093D04809E8B7FC26B821421B278",</p>
<p>    "expires_in": 3600</p>
<p>}</p>
<table class="doxtable">
</table>
<p>&lt;col style="width: 25%" &gt; &lt;col style="width: 74%" &gt; &lt;/colgroup&gt;  </p>
<p><b>PARAMETER</b> </p>
<p><b>DESCRIPTION</b>    </p>
<p>access_token </p>
<p>access token of the user sent by Bas</p>
<p><b>Example</b>: 7522b293-cad6-4ed8-bdc6-7c3bc3637100</p>
<p>expires </p>
<p>expiration time</p>
<p><b>Example</b>: 1570465786000</p>
<h4><a class="anchor" id="error-responses-1"></a>
Error Responses</h4>
<table class="doxtable">
</table>
<p>&lt;col style="width: 100%" &gt; &lt;/colgroup&gt;  </p>
<p><b>FAIL</b>    </p>
<p>{</p>
<p>    "head": null,</p>
<p>    "Status": 0,</p>
<p>    "Code": "9001",</p>
<p>    "Messages": [</p>
<p>        "invalid_grant"</p>
<p>    ],</p>
<p>    "Data": null</p>
<p>}</p>
<table class="doxtable">
</table>
<p>&lt;col style="width: 33%" &gt; &lt;col style="width: 66%" &gt; &lt;/colgroup&gt;  </p>
<p><b>PARAMETER</b> </p>
<p><b>DESCRIPTION</b>    </p>
<p>head </p>
<p>Status </p>
<p>0  </p>
<p>Code </p>
<p>Error code number as string</p>
<p>Example:     "Code": "9001"</p>
<p>Messages </p>
<p>error message</p>
<p><b>Example</b>: Something went wrong</p>
<p><a class="anchor" id="error-codes-1"></a> </p><h5>Error Codes</h5>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"><b>STATUS</b>   </th><th class="markdownTableHeadNone"><b>ERROR</b>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">400   </td><td class="markdownTableBodyNone">Internal Error    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">400   </td><td class="markdownTableBodyNone">unsupported_grant_type    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">400   </td><td class="markdownTableBodyNone">invalid_grant    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">401   </td><td class="markdownTableBodyNone">NO RESPONSE BODY   </td></tr>
</table>
<h2><a class="anchor" id="post-getuserinfo-api"></a>
POST: getUserInfo API</h2>
<h3><a class="anchor" id="use-case-2"></a>
Use Case</h3>
<p>This API gives a merchant the Bas's user details (Profile Name and Phone Number) corresponding to an access token. This should be used to facilitate seamless Login in the merchant's system.</p>
<p>BaseURL/api/v1/auth​/userinfo</p>
<ol type="1">
<li>POST /api/v1/auth/userinfo/</li>
<li>Request URL<ul>
<li>Staging Environment<ol type="a">
<li>BaseURl/api/v1/auth/userinfo/</li>
</ol>
</li>
<li>Production Environment<ol type="a">
<li>Not provided yet.</li>
</ol>
</li>
</ul>
</li>
<li>Header Description</li>
</ol>
<h3><a class="anchor" id="request-attributes-2"></a>
Request Attributes</h3>
<p>Content Type: JSON</p>
<table class="doxtable">
</table>
<p>&lt;col style="width: 100%" &gt; &lt;/colgroup&gt;  </p>
<p><b>CURL</b>    </p>
<p>curl <b>-</b>X GET BaseURL/api/v1/auth​/userinfo'</p>
<p><b>&ndash;</b>header 'Authorization: Bearer YWxhZGRpbjpvcGVuc2VzYW1l……'</p>
<p><b>JAVASCRIPT</b>  </p>
<p><b>const</b> url <b>=</b> BaseURL/api/v1/auth​/userinfo'</p>
<p><b>const</b> otherParams <b>=</b> <b>{</b></p>
<p>headers<b>:</b> <b>{</b></p>
<p>"Authorization"<b>:</b> " Bearer
YWxhZGRpbjpvcGVuc2VzYW1l…"<b>,</b></p>
<p><b>},</b></p>
<p>method<b>:</b> "GET"</p>
<p><b>};</b></p>
<p>fetch<b>(</b>url<b>,</b> otherParams<b>).</b>then<b>(</b>res <b>=&gt;</b> res<b>.</b>json&lt;strong&gt;()).then<b>(</b>res <b>=&gt;</b> console<b>.</b>log<b>(</b>res<b>)).catch(</b>err <b>=&gt;</b> console<b>.</b>log<b>(</b>err<b>))</b></p>
<h4><a class="anchor" id="head-2"></a>
Head</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"><b>Key</b>   </th><th class="markdownTableHeadNone"><b>Value</b>   </th><th class="markdownTableHeadNone"><b>Description</b>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Authorization   </td><td class="markdownTableBodyNone">Bearer token   </td><td class="markdownTableBodyNone">Access token.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Content-Type   </td><td class="markdownTableBodyNone">application/json   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td></tr>
</table>
<h3><a class="anchor" id="response-attributes-2"></a>
Response Attributes</h3>
<p>Content Type: JSON</p>
<h4><a class="anchor" id="head-3"></a>
Head</h4>
<table class="doxtable">
</table>
<p>&lt;col style="width: 40%" &gt; &lt;col style="width: 59%" &gt; &lt;/colgroup&gt;  </p>
<p><b>ATTRIBUTE</b> </p>
<p><b>DESCRIPTION</b>    </p>
<p>status</p>
<p>string</p>
<p>status of response</p>
<p><b>Example</b>: 200</p>
<h4><a class="anchor" id="success-2"></a>
Success:</h4>
<table class="doxtable">
</table>
<p>&lt;col style="width: 100%" &gt; &lt;/colgroup&gt;  </p>
<p><b>SUCCESS</b>    </p>
<p>{</p>
<p>    "head": null,</p>
<p>    "status": 1,</p>
<p>    "code": "1111",</p>
<p>    "messages": null,</p>
<p>    "data": {</p>
<p>        "open_id": "73ad3a7b-ed76-484b-bea3-eea96ca8021d",</p>
<p>        "user_name": "771766774",</p>
<p>        "name": "Ahmed",</p>
<p>        "phone": "771766774"</p>
<p>    }</p>
<p>}</p>
<h4><a class="anchor" id="error-codes-2"></a>
Error Codes</h4>
<table class="doxtable">
</table>
<p>&lt;col style="width: 100%" &gt; &lt;/colgroup&gt;  </p>
<p><b>FAIL</b>    </p>
<p>{</p>
<p>    "status": 0,</p>
<p>    "code": “2001”,</p>
<p>    "messages": [</p>
<p>        "duplicate order id"</p>
<p>    ]</p>
<p>}</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"><b>RESPONSE CODE</b>   </th><th class="markdownTableHeadNone"><b>STATUS</b>   </th><th class="markdownTableHeadNone"><b>MESSAGE</b>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">401   </td><td class="markdownTableBodyNone">Failure   </td><td class="markdownTableBodyNone">Unauthorized Request    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">434   </td><td class="markdownTableBodyNone">Failure   </td><td class="markdownTableBodyNone">Bad Request    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">530   </td><td class="markdownTableBodyNone">Failure   </td><td class="markdownTableBodyNone">Insufficient parameters    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">827   </td><td class="markdownTableBodyNone">Failure   </td><td class="markdownTableBodyNone">There was issue in processing request    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">514   </td><td class="markdownTableBodyNone">Failure   </td><td class="markdownTableBodyNone">User Not Found    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">827   </td><td class="markdownTableBodyNone">Failure   </td><td class="markdownTableBodyNone">There was issue in processing request    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1301   </td><td class="markdownTableBodyNone">Failure   </td><td class="markdownTableBodyNone">Client does not have permission to fetch    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">3005   </td><td class="markdownTableBodyNone">Failure   </td><td class="markdownTableBodyNone">Blocked due to security reasons   </td></tr>
</table>
<h1><a class="anchor" id="payment-flow"></a>
Payment Flow</h1>
<p>You can leverage Bas’s best in class Payment Gateway in your Mini Apps. </p>
<p><img src="../../media/image3.emf" alt="" style="width:6.27014in;height:5.75556in" class="inline"/></p>
<p><b>The Payment flow for Mini Apps works like this:</b></p>
<ol type="1">
<li>User adds items to your cart and clicks on Proceeds to Pay</li>
<li>User is then shown a popup of Bas PG right within Bas App, where all configured payment modes are visible.</li>
<li>User completes payment and is landed back seamlessly to your Mini Apps.</li>
</ol>
<p>**Note:** Note: callbackUrl in <a href="https://developer.Bas.com/docs/api/initiate-transaction-api/">Initiate Transaction API </a>is mandatory in case of Mini Apps PG flow. Merchant during Initiate Transaction API can either use the default callbackURL(<a href="https://securegw.Bas.in/theia/BasCallback?ORDER_ID=#OrderId#">https://securegw.Bas.in/theia/BasCallback?ORDER_ID=#OrderId#</a> where #OrderId# is actual OrderId used for initating transaction) or pass their custom URL . Please ensure that the custom URL should not throw any network error and should be secured by SSL layer.</p>
<p><b>Integrating Payment flow in Mini Apps involves the following steps:</b></p>
<ol type="1">
<li>Once the user has clicked the pay button on the mini app the merchant app backend server should call the [Initiate Transaction Order API](<a href="https://developer.Bas.com/docs/api/initiate-transaction-api/">https://developer.Bas.com/docs/api/initiate-transaction-api/</a>)</li>
<li>The merchant app server will get a Transaction Token from Bas server.</li>
<li>Merchant miniapp need to call the Bas <a class="el" href="../../d5/d66/md__source_23-_01_x_d8_x_a_f_x_d9_x84_x_d9_x8_a_x_d9_x84_01_x_d8_x_a7_x_d9_x84_x_d8_x_b1_x_d8_x_b4f72440e2f719a7f7aac069ab44af70.html#post-initiate-transaction-order-api">basPayment JS API</a> with the required following payload.</li>
<li>Bas show the payment page to the user.</li>
<li>User select the payment method &amp; click checked.</li>
<li>Bas check the parameter &amp; start call the <a href="https://developer.Bas.com/docs/api/initiate-transaction-api/">Initiate Transaction API</a> of payment gateway.</li>
<li>Bas processes the transaction with the user’s payment method and returns transaction response to your App.</li>
<li>You call <a href="https://developer.Bas.com/docs/api/initiate-transaction-api/">status Transaction API</a> to verify the transaction response</li>
<li>Notify the payment status to user and proceed with the order/service fulfilment.</li>
</ol>
<h2><a class="anchor" id="post-initiate-transaction-order-api"></a>
POST: initiate Transaction Order API</h2>
<p>URL :</p>
<p><a href="https://stagebas.yk-bank.com:9101/api/v1/merchant/secure/transaction/initiate">BaseURL/api/v1/merchant/secure/transaction/initiate</a></p>
<h3><a class="anchor" id="use-case-3"></a>
Use Case</h3>
<p>To start transaction order for native flow, merchant need to first call this api and send the order info to BAS backend, BAS will create transaction order ID and return the txn Token which will be used in all the other native APIs.</p>
<table class="doxtable">
</table>
<p>&lt;col style="width: 100%" &gt; &lt;/colgroup&gt;  </p>
<p>Note:</p>
<p>The body tag element should be after header &amp; the last one (that mean no element after body tag element) as it is below.</p>
<table class="doxtable">
</table>
<p>&lt;col style="width: 100%" &gt; &lt;/colgroup&gt;  </p>
<p><b>Sample</b>    </p>
<p>{</p>
<p>    "head": {</p>
<p>        "signature": "",</p>
<p>"requestTimestamp":””</p>
<p>    },</p>
<p>    "body": {</p>
<p>"requestTimestamp":””,</p>
<p>        "appId": "fdd4b312-c451-40fc-adc5-7c2ed83c4324",</p>
<p>        "OrderType": "PayBill",</p>
<p>        "customerInfo": {</p>
<p>            "id": "50",</p>
<p>            "name": "&lt;span
dir="rtl"&gt;الشامي للتجارة العامة&lt;/span&gt;"</p>
<p>        },</p>
<p>        "amount": {</p>
<p>            "value": 1100.0,</p>
<p>            "currency": "YER"</p>
<p>        },</p>
<p>        "orderId": "78542856444363899",</p>
<p>        "callBackUrl": "gdgfdfdgfdc",</p>
<p>        "orderDetails": {</p>
<p>            "SENDER_MOBILE": "772612217",</p>
<p>            "RECEIVER_MOBILE": "711271124"</p>
<p>        }</p>
<p>    }</p>
<p>}​</p>
<h3><a class="anchor" id="request-attributes-3"></a>
Request Attributes</h3>
<h4><a class="anchor" id="body-1"></a>
Body</h4>
<table class="doxtable">
</table>
<p>&lt;col style="width: 18%" &gt; &lt;col style="width: 17%" &gt; &lt;col style="width: 63%" &gt; &lt;/colgroup&gt;  </p>
<p>Paramter name </p>
<p>ATTRIBUTE </p>
<p>DESCRIPTION    </p>
<p>appId </p>
<p>string</p>
<p>mandatory</p>
<p>Merchant appid in Bas.</p>
<p><b>Example:</b> v1</p>
<p>signature </p>
<p>signature</p>
<p>string</p>
<p>BasApp validates the request and ensures that parameters are not tempered</p>
<p>by verifying the signature in the request.</p>
<p>For creating the checksum (signature) refer to the steps given in <a href="https://business.bas.com/docs/checksum/">Checksum Logic</a>.<br  />
 <b>Note:</b> Create the signature using the body parameter of the request.</p>
<p>requestTimestamp </p>
<p>long</p>
<p>mandatory</p>
<p>The request start datetime.  </p>
<p>callBackUrl </p>
<p>callbackUrl</p>
<p>string</p>
<p>conditional</p>
<p>BasApp sends the response of transaction on the URL which comes in the callbackUrl parameter. If this param is not present then websiteName param key will be used to get the static callbackUrl.<br  />
 Example: <a href="https://business.bas.com/docs/api/initiate-transaction-api/">https://&amp;lt;callback URL to be used by merchant&gt;</a><br  />
 <b>Note:</b> Either of websiteName or callbackUrl should be passed in the request.  </p>
<p>amount </p>
<p>amount</p>
<p>string</p>
<p>mandatory</p>
<p>This parameter is an object and should contain the value of transaction i.e. amount and currency type.</p>
<p><b>Example:</b> {"value" : 1.00, "currency" : "YER"}</p>
<p>orderId </p>
<p>orderId</p>
<p>String</p>
<p>mandatory</p>
<p>This is unique reference ID for a transaction which is generated by merchant and sent in the request.  </p>
<p>orderType </p>
<p>orderType</p>
<p>String</p>
<p>optional</p>
<p>It is order classification</p>
<p>Example</p>
<p>customerInfo </p>
<p>customerInfo</p>
<p>object</p>
<p>optional</p>
<p>User information contains user details like customer ID, email, phone number etc.</p>
<p>Only Customer ID is mandatory</p>
<p>orderDetails </p>
<p>object</p>
<p>optional</p>
<p>Any information that need which not include in the above.</p>
<p><b>Example</b>:</p>
<p>" orderDetails
": {"refrence_Code": "ref_10", "batch_Code": "b_145" }</p>
<h3><a class="anchor" id="response-attributes-3"></a>
Response Attributes</h3>
<p>Content Type : JSON</p>
<table class="doxtable">
</table>
<p>&lt;col style="width: 100%" &gt; &lt;/colgroup&gt;  </p>
<p><b>Success</b>    </p>
<p>{</p>
<p> "head": {</p>
<p>        "signature": "",</p>
<p>"requestTimestamp":”1670262606784”</p>
<p>    },</p>
<p>    "body": {</p>
<p>“trxStatusId”:0,</p>
<p>   "trxStatus": "Recoreded",</p>
<p>"trxId": "cbcb8f9f-f165-4fc4-acb7-0349a8341a50",</p>
<p>        "trxToken": "esxW86q22khy0PMRY3OhRqG7xeUzEznSUFkwMjg3MA==",</p>
<p>        "authenticated": <b>true</b>,</p>
<p>        "timestamp": 0,</p>
<p>        "isTokenExpired": <b>false</b>,</p>
<p>        "order": {</p>
<p>            "appId": "fdd4b312-c451-40fc-adc5-7c2ed83c4324",</p>
<p>            "orderId": "02870",</p>
<p>            "amount": {</p>
<p>                "value": 200450.0,</p>
<p>                "currency": "YER"</p>
<p>            },</p>
<p>            "description": "&lt;span
dir="rtl"&gt;سداد فاتورة رقم 02870&lt;/span&gt;\n &lt;span
dir="rtl"&gt;لدى&lt;/span&gt; \n&lt;span
dir="rtl"&gt;الشحن وتسديد الفواتير&lt;/span&gt;",</p>
<p>            "callBackUrl": "gdgfdfdgfdc",</p>
<p>            "creationDate": "2022-10-25T17:04:16.3277132+00:00",</p>
<p>            "orderDetails": {</p>
<p>                             }</p>
<p>        }</p>
<p>    },</p>
<p>    "status": 1,</p>
<p>    "code": “1111”,</p>
<p>    "messages": [</p>
<p>        "Success"</p>
<p>    ],</p>
<p>}​</p>
<h4><a class="anchor" id="body-2"></a>
Body</h4>
<table class="doxtable">
</table>
<p>&lt;col style="width: 11%" &gt; &lt;col style="width: 13%" &gt; &lt;col style="width: 74%" &gt; &lt;/colgroup&gt;  </p>
<p>ATTRIBUTE </p>
<p>DESCRIPTION    </p>
<p>trxStatusId </p>
<p>int </p>
<p>The status process or step name of the transaction with success.</p>
<p>To all names go to <a href="#body-transaction-status">body Transaction Status</a></p>
<p>Example:    <b>" trxStatusId":</b> "1011"</p>
<p>trxStatus </p>
<p>string </p>
<p>The status process or step name of the transaction with success.</p>
<p>To all names go to <a href="#body-transaction-status">body Transaction Status</a></p>
<p>Example:    "trxStatus": "Recoreded"</p>
<p>status</p>
<p>int</p>
<p>status</p>
<p>int</p>
<p>This parameter gives the information about the result of the API response  </p>
<p>Trx Token</p>
<p>string</p>
<p>transactionToken</p>
<p>string</p>
<p>This is the unique transaction token received in the response of <a href="https://business.Bas.com/docs/initiate-transaction-api/">Initiate Transaction API</a>. It is valid for 15 minutes.</p>
<p><b>Example: </b>f0bed899539742309eebd8XXXX7edcf61588842333227</p>
<p>code</p>
<p>int</p>
<p>code</p>
<p>string</p>
<p>“111” success else fail  </p>
<p>signature</p>
<p>string</p>
<p>signature</p>
<p>string</p>
<p>mandatory</p>
<p> "head": {</p>
<p>        "signature": "jAHRz1SFikaa//FytXx4lRojZAzNEU9r0gkxlTJIrtX8pu2mykJ7HS9NcL9Lzde9UMyqrlrR6noiT4zzaeLrMvJObRnnxlHCGTl9a44V/FY="</p>
<p>    },</p>
<p>callBackUrl </p>
<p>callbackUrl</p>
<p>string</p>
<p>conditional</p>
<p>BasApp sends the response of transaction on the URL which comes in the callbackUrl parameter. If this param is not present then websiteName param key will be used to get the static callbackUrl.<br  />
 Example: <a href="https://business.bas.com/docs/api/initiate-transaction-api/">https://&amp;lt;callback URL to be used by merchant&gt;</a><br  />
 <b>Note:</b> Either of websiteName or callbackUrl should be passed in the request.  </p>
<p>amount </p>
<p>amount</p>
<p>string</p>
<p>mandatory</p>
<p>This parameter is an object and should contain the value of transaction i.e. amount and currency type.</p>
<p><b>Example:</b> {"value" : 1.00, "currency" : "YER"}</p>
<p>orderId </p>
<p>orderId</p>
<p>String</p>
<p>mandatory</p>
<p>This is unique reference ID for a transaction which is generated by merchant and sent in the request.  </p>
<p>orderType </p>
<p>orderType</p>
<p>String</p>
<p>optional</p>
<p>Not used.  </p>
<p>customerInfo </p>
<p>customerInfo</p>
<p>object</p>
<p>optional</p>
<p>User information contains user details like customer ID, email, phone number etc.</p>
<p>Only Customer ID is mandatory</p>
<p>orderDetails </p>
<p>object</p>
<p>optional</p>
<p>Any information that need which not include in the above.</p>
<p><b>Example</b>:</p>
<p>" orderDetails
": {"refrence_Code": "ref_10", "batch_Code": "b_145" }</p>
<h3><a class="anchor" id="response-code--messages"></a>
Response Code &amp; Messages</h3>
<table class="doxtable">
</table>
<p>&lt;col style="width: 100%" &gt; &lt;/colgroup&gt;  </p>
<p><b>FAIL</b>    </p>
<p>{</p>
<p>    "status": 0,</p>
<p>    "code": “2001”,</p>
<p>    "messages": [</p>
<p>        "duplicate order id"</p>
<p>    ]</p>
<p>}</p>
<p><a class="anchor" id="error-codes-3"></a> </p><h5>Error Codes</h5>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"><b>RESPCODE</b>   </th><th class="markdownTableHeadNone"><b>STATUS</b>   </th><th class="markdownTableHeadNone"><b>RESPMSG</b>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2001   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">duplicate order id    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2002   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Order_currency_not_correct     </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2003   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Order_amount_not_correct    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2004   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">No_transaction_found    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2005   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">No_provider_miniApp_found    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">9999   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Something went wrong   </td></tr>
</table>
<h2><a class="anchor" id="post-baspayment-js-api"></a>
POST: basPayment JS API</h2>
<h3><a class="anchor" id="use-case-4"></a>
Use Case</h3>
<p>This method can be used to invoke the Bas payment option, user will be able to see all the available payment options, and after a successful transaction client-side will receive the callback.</p>
<h3><a class="anchor" id="request-attributes-4"></a>
Request Attributes</h3>
<p>Content Format: JSON</p>
<table class="doxtable">
</table>
<p>&lt;col style="width: 100%" &gt; &lt;/colgroup&gt;  </p>
<p><b>JAVASCRIPT</b>    </p>
<p>function basPayment(){</p>
<p>JSBridge.call('basPayment', {</p>
<p>"amount": {</p>
<p>"value": "1.00",</p>
<p>"currency": "YER",</p>
<p>},</p>
<p>"orderId": "0071490615",</p>
<p>"transactionToken": "fe795335ed3049c78a57271075f2199e1526969112097",</p>
<p>"appId": " ABCdj00008000000"</p>
<p>}).then(function(result) {</p>
<p>/****** Response Example ******/</p>
<p>/*{</p>
<p>"appid": "",</p>
<p>"orderId": "",</p>
<p>"transactionId": "",</p>
<p>"amount": {</p>
<p>"value": 0,</p>
<p>"currency": "YER"</p>
<p>},</p>
<p>"paymentType": "",</p>
<p>"date": "",</p>
<p>"status":1</p>
<p>}*/</p>
<p>/****** End Response Example ******/</p>
<p>console.log(JSON.stringify(result));</p>
<p>});</p>
<p><b>Flutter</b>  </p>
<p>BasSDK.payment({</p>
<p>Amount=100,<br  />
 currency=<b>'YER'</b>,<br  />
 orderId= <b>'YOUR ORDER ID'</b>,<br  />
 trxToken= <b>''</b>,<br  />
 appId= <b>'YOUR APP ID'</b></p>
<p>}).then((Transaction? transaction){</p>
<p>})</p>
<table class="doxtable">
</table>
<p>&lt;col style="width: 18%" &gt; &lt;col style="width: 81%" &gt; &lt;/colgroup&gt;  </p>
<p><b>PARAMETER</b> </p>
<p><b>DESCRIPTION</b>    </p>
<p>amount</p>
<p>mandatory</p>
<p>Amount to be paid by the customer in YER</p>
<p><b>Example</b>: 1.00</p>
<p>orderId mandatory </p>
<p>Unique reference ID for a transaction which is generated by merchant and sent in the request</p>
<p><b>Example</b>: 0071490615</p>
<p>trxToken mandatory </p>
<p>It is the security token generated by <a href="https://developer.Bas.com/docs/api/initiate-transaction-api/">Initiate Transaction API </a>for a transaction. It is valid for 15 minutes.</p>
<p><b>Example</b>: fe795335ed3049c78a57271075f2199e1526969112097</p>
<p>appId mandatory </p>
<p>This is a unique identifier provided to every merchant by Bas</p>
<p><b>Example</b>: ABCdj00008000000</p>
<h3><a class="anchor" id="response-attributes-4"></a>
Response Attributes</h3>
<p>Once the payment is done, the response callback is received, which can be in either of the two formats:</p>
<ul>
<li>{"data": false} if no response string was generated by the internal payment mechanism, due to an unknown reason.</li>
<li>{"data": ""} if some unknown error occured.</li>
<li>{"data": } if a response string was successfully generated.</li>
</ul>
<p><b>Note</b>:If the value against "data" key is a string, it should be parsed into a json to obtain the response attributes detailed below. In this case, the json thus parsed contains fields indicating whether the payment succeeded or failed (along with the reason for failure).</p>
<h4><a class="anchor" id="success-3"></a>
Success</h4>
<table class="doxtable">
</table>
<p>&lt;col style="width: 100%" &gt; &lt;/colgroup&gt;  </p>
<p><b>SUCCESS</b>    </p>
<p>/****** Response Example ******/<br  />
 /*{</p>
<p>          "status": 1,​</p>
<p>          "data": {</p>
<p>           "appId": "",</p>
<p>           "orderId": "",</p>
<p>           "transactionId": "",</p>
<p>           "amount": {</p>
<p>             "value": 0,</p>
<p>             "currency": "YER"</p>
<p>           },</p>
<p>           "paymentType": "",</p>
<p>           "date": "",</p>
<p>           "status":1</p>
<p>         },</p>
<p>          "messages": [""]</p>
<p>        }*/<br  />
 /****** End Response Example ******</p>
<table class="doxtable">
</table>
<p>&lt;col style="width: 18%" &gt; &lt;col style="width: 81%" &gt; &lt;/colgroup&gt;  </p>
<p><b>PARAMETER</b> </p>
<p><b>DESCRIPTION</b>    </p>
<p>status </p>
<p>It shows the transaction status and has only three values: success 1, fail 0 and PENDING</p>
<p><b>Example</b>: 1</p>
<p>data </p>
<p>It object contain order information</p>
<p><b>Example</b>: "data": {</p>
<p>           "appId": "",</p>
<p>           "orderId": "",</p>
<p>           "transactionId": "",</p>
<p>           "amount": {</p>
<p>             "value": 0,</p>
<p>             "currency": "YER"</p>
<p>           },</p>
<p>           "paymentType": "",</p>
<p>           "date": "","status":1     }</p>
<p>messages </p>
<h4><a class="anchor" id="error-responses-2"></a>
Error Responses</h4>
<table class="doxtable">
</table>
<p>&lt;col style="width: 100%" &gt; &lt;/colgroup&gt;  </p>
<p><b>FAIL</b>    </p>
<p>{</p>
<p>    "status": 0,</p>
<p>    "code": “2001”,</p>
<p>    "messages": [</p>
<p>        "duplicate order id"</p>
<p>    ]</p>
<p>}</p>
<table class="doxtable">
</table>
<p>&lt;col style="width: 40%" &gt; &lt;col style="width: 59%" &gt; &lt;/colgroup&gt;  </p>
<p><b>PARAMETER</b> </p>
<p><b>DESCRIPTION</b>    </p>
<p>error.code </p>
<p>Error code</p>
<p><b>Example</b>: 0</p>
<p><a class="anchor" id="error-codes-4"></a> </p><h5>Error Codes</h5>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"><b>RESPCODE</b>   </th><th class="markdownTableHeadNone"><b>STATUS</b>   </th><th class="markdownTableHeadNone"><b>RESPMSG</b>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1101   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Invalid transaction token    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1102   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Transaction token expired    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1103   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Checksum provided is invalid    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1104   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Invalid timeStamp    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2001   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Duplicate order id    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2002   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Order currency not correct    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2003   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Order amount not correct     </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2004   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">No transaction found    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2005   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">No provider miniApp found     </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">9999   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Something went wrong   </td></tr>
</table>
<h2><a class="anchor" id="post-check-transaction-status-api"></a>
POST: check Transaction Status API</h2>
<h3><a class="anchor" id="user-case"></a>
User Case</h3>
<p>This method can be call to check the payment transaction status if success or fail</p>
<p>Its return the final transaction payment status.</p>
<p>URL:</p>
<p><a href="https://stagebas.yk-bank.com:9101/api/v1/merchant/secure/transaction/status">BaseURL/api/v1/merchant/secure/transaction/status</a></p>
<table class="doxtable">
</table>
<p>&lt;col style="width: 100%" &gt; &lt;/colgroup&gt;  </p>
<p><b>Sample</b>    </p>
<p>{</p>
<p>  </p>
<p>"head": {</p>
<p>        "signature": "",</p>
<p>"requestTimestamp":””</p>
<p>    },</p>
<p>  "body": {</p>
<p>"requestTimestamp":””,</p>
<p>" appId ": " fdd4b312-c451-40fc-adc5-7c2ed83c4324",</p>
<p>    "orderId": "officia in elit aliquip",</p>
<p>    </p>
<p>}</p>
<h3><a class="anchor" id="request-attributes-5"></a>
Request Attributes</h3>
<h4><a class="anchor" id="body-3"></a>
Body</h4>
<table class="doxtable">
</table>
<p>&lt;col style="width: 16%" &gt; &lt;col style="width: 11%" &gt; &lt;col style="width: 72%" &gt; &lt;/colgroup&gt;  </p>
<p>Paramter name </p>
<p>ATTRIBUTE </p>
<p>DESCRIPTION    </p>
<p>orderId </p>
<p>string</p>
<p>mandatory</p>
<p>Order ID for the transaction.</p>
<p><b>Example:</b> { "orderId": "aliquip magna occaecat sint"}</p>
<p>appId </p>
<p>string</p>
<p>mandatory</p>
<p>Merchant appid in Bas.</p>
<p><b>Example:</b> v1</p>
<p>signature </p>
<p>signature</p>
<p>string</p>
<p>BasApp validates the request and ensures that parameters are not tempered</p>
<p>by verifying the signature in the request.</p>
<p>For creating the checksum (signature) refer to the steps given in <a href="../../CheckSum.docx">Checksum Logic</a>.<br  />
 <b>Note:</b> Create the signature using the body parameter of the request.</p>
<p>requestTimestamp </p>
<p>long</p>
<p>mandatory</p>
<p>The request start datetime.   </p>
<h3><a class="anchor" id="response-attributes-5"></a>
Response Attributes</h3>
<h4><a class="anchor" id="body-4"></a>
Body</h4>
<p>Content Type : JSON</p>
<table class="doxtable">
</table>
<p>&lt;col style="width: 100%" &gt; &lt;/colgroup&gt;  </p>
<p><b>Success</b>    </p>
<p>{</p>
<p>  "status": 1,</p>
<p>  "code": “111”,</p>
<p>  "messages": [</p>
<p>    "et commodo sed",</p>
<p>    "sint enim est"</p>
<p>  ],</p>
<p>"head": {</p>
<p>        "signature": ""</p>
<p>    },</p>
<p>  "body": {</p>
<p>     "trxStatusId": “1011”,</p>
<p>        "trxStatus": "Recoreded",</p>
<p>        "trxToken": "M1wcauvW2kj+bvetsjv7Tr1N4ydfmFXcUFkxMjUyMjM1",</p>
<p>        "timestamp": 0,</p>
<p>        "order": {</p>
<p>            "appId": "fdd4b312-c451-40fc-adc5-7c2ed83c4324",</p>
<p>            "orderId": "1252235",</p>
<p>            "amount": {</p>
<p>                "value": 1100.0,</p>
<p>                "currency": "YER"</p>
<p>            },</p>
<p>            "description": "&lt;span
dir="rtl"&gt;سداد فاتورة رقم 1252235&lt;/span&gt;\n &lt;span
dir="rtl"&gt;لدى&lt;/span&gt; \n&lt;span
dir="rtl"&gt;الشحن وتسديد الفواتير&lt;/span&gt;",</p>
<p>            "callBackUrl": "gdgfdfdgfdc",</p>
<p>            "orderDetails": {</p>
<p>              </p>
<p>             }</p>
<p>        }</p>
<p>  }</p>
<p>}</p>
<h4><a class="anchor" id="body-transaction-status"></a>
Body Transaction Status</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"><b>STATUSID</b>   </th><th class="markdownTableHeadNone"><b>STATUS</b>   </th><th class="markdownTableHeadNone"><b>RESPMSG</b>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1001   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Failed    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1002   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Initiate    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1003   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Success    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1004   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Incomplete    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1005   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Pending    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1006   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Refunded    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1007   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Flagged    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1008   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Cancelled    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1009   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">UserDropped    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1010   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">NotAttempted    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1011   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Recorded    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1111   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Complete    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td></tr>
</table>
<h3><a class="anchor" id="response-code--messages-1"></a>
Response Code &amp; Messages</h3>
<table class="doxtable">
</table>
<p>&lt;col style="width: 100%" &gt; &lt;/colgroup&gt;  </p>
<p><b>FAIL</b>    </p>
<p>{</p>
<p>    "status": 0,</p>
<p>    "code": “9999”,</p>
<p>    "messages": [</p>
<p>        "Something went wrong"</p>
<p>    ]</p>
<p>}</p>
<h4><a class="anchor" id="error-codes-5"></a>
Error Codes</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"><b>RESPCODE</b>   </th><th class="markdownTableHeadNone"><b>STATUS</b>   </th><th class="markdownTableHeadNone"><b>RESPMSG</b>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1101   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Invalid transaction token    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1102   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Transaction token expired    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1103   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Checksum provided is invalid    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1104   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Invalid timeStamp    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2001   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Duplicate order id    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2002   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Order currency not correct    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2003   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Order amount not correct     </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2004   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">No transaction found    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2005   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">No provider miniApp found     </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">9999   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Something went wrong   </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">انتجت بواسطة <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
